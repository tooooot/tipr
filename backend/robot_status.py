"""
๐ค Robot Status Messages System
================================
Generates dynamic status messages for robots when they're not trading
"""

import random
from datetime import datetime

# Robot Status Messages - What they're watching and why
ROBOT_STATUS_MESSAGES = {
    "al_qannas": {
        "name": "ุงูููุงุต",
        "emoji": "๐ฏ",
        "watching": [
            "ุฃุฑุงูุจ ูุคุดุฑ RSI ุนูู {count} ุณูู",
            "ุฃุชุชุจุน ุญุฑูุฉ {count} ุณูู ุจุนูุงูุฉ",
            "ุฃุญูู {count} ูุฑุตุฉ ูุญุชููุฉ"
        ],
        "waiting_reasons": [
            "ุงูุณูู ูู ููุทูุฉ ุชุดุจุน ุดุฑุงุฆู (RSI > 70) - ุงูุชุธุฑ ุงูุงูุฎูุงุถ",
            "ูุนุธู ุงูุฃุณูู ูู ูุทุงู ูุญุงูุฏ (RSI 40-60) - ูุง ูุฑุต ูุงุถุญุฉ",
            "ุฃุจุญุซ ุนู RSI ุฃูู ูู 30 ููุฑุตุฉ ุดุฑุงุก ูููุฉ",
            "ุงูุฃุณุนุงุฑ ูุณุชูุฑุฉ - ุงูุชุธุฑ ุชููุจุงุช ุฃููู",
            "ุขุฎุฑ ุฅุดุงุฑุฉ ูุงูุช ุถุนููุฉ (RSI 35) - ุฃุจุญุซ ุนู ุฃููู"
        ],
        "next_action": [
            "ุณุฃุฑุงูุจ ุงููุฌูุงุช ุงูุณุนุฑูุฉ ุตุจุงุญ ุงูุบุฏ",
            "ุฅุฐุง ูุจุท ุงูุณูู 3% ุณุฃุฏุฎู ููุฑุงู",
            "ุฃุชุฑูุจ ุฅุนูุงูุงุช ุงูุฃุฑุจุงุญ ูุฐุง ุงูุฃุณุจูุน"
        ]
    },
    
    "al_maestro": {
        "name": "ุงููุงูุณุชุฑู",
        "emoji": "๐ญ",
        "watching": [
            "ุฃุชุงุจุน ุฒุฎู {count} ุณูู",
            "ุฃุฑุงูุจ ุงุชุฌุงูุงุช {count} ูุฑุตุฉ",
            "ุฃุญูู ููุฉ ุงูุงุชุฌุงู ูู {count} ุณูู"
        ],
        "waiting_reasons": [
            "ุงูุณูู ูู ุญุงูุฉ ุชุฐุจุฐุจ ุฌุงูุจู - ูุง ุงุชุฌุงู ูุงุถุญ",
            "ุงูุฒุฎู ุถุนูู (ุฃูู ูู 2%) - ุงูุชุธุฑ ููุฉ ุฃูุจุฑ",
            "ุขุฎุฑ ููุฌุฉ ุตุนูุฏ ุงูุชูุช - ุฃุจุญุซ ุนู ุจุฏุงูุฉ ุฌุฏูุฏุฉ",
            "ุงูุฃุณูู ุชุชุญุฑู ุจุดูู ุนุดูุงุฆู - ูุง ููุท ูุงุถุญ",
            "ุงูุญุฌู ููุฎูุถ - ุงูุชุธุฑ ุฏุฎูู ุงููุคุณุณุงุช"
        ],
        "next_action": [
            "ุฅุฐุง ูุณุฑ ุงูุณูู ุงูููุงููุฉ ุณุฃุฏุฎู ุจููุฉ",
            "ุฃูุชุธุฑ ุงุฑุชูุงุน ุงูุญุฌู ููู ุงููุนุฏู",
            "ุณุฃุชุงุจุน ุงูุชุชุงุญ ุงูุณูู ุบุฏุงู ุจุญุฐุฑ"
        ]
    },
    
    "sayyad_alfors": {
        "name": "ุตูุงุฏ ุงููุฑุต",
        "emoji": "๐น",
        "watching": [
            "ุฃุฑุงูุจ ููุนุงู {count} ุณูู",
            "ุฃุชุชุจุน ูุณุชููุงุช ุงูุฏุนู ูู {count} ูุฑุตุฉ",
            "ุฃุญูู ุงูุนูุงุณุงุช ูุญุชููุฉ ูู {count} ุณูู"
        ],
        "waiting_reasons": [
            "ูู ูุตู ููุงุน 24 ุณุงุนุฉ ุจุนุฏ - ุงูุณุนุฑ ุฃุนูู ุจู5%",
            "ุงููุงุน ุงูุญุงูู ููุณ ูููุงู - ุงูุชุธุฑ ุชุฃููุฏ",
            "ุขุฎุฑ ูุจูุท ูุงู ุจุณูุทุงู (-2%) - ุฃุจุญุซ ุนู ุฃููู",
            "ุงูุฃุณุนุงุฑ ุจุนูุฏุฉ ุนู ูุณุชููุงุช ุงูุฏุนู",
            "ูุง ุฅุดุงุฑุงุช ุงุฑุชุฏุงุฏ ูุงุถุญุฉ ุญุชู ุงูุขู"
        ],
        "next_action": [
            "ุฅุฐุง ููุณ ุงูุณูู ุงูุฏุนู ุณุฃุฏุฎู ูุจุงุดุฑุฉ",
            "ุฃูุชุธุฑ ูุจูุท 4% ุนูู ุงูุฃูู",
            "ุณุฃุฑุงูุจ ููุงูุฉ ุงูุชุฏุงูู ูููุฑุต"
        ]
    },
    
    "al_jasour": {
        "name": "ุงูุฌุณูุฑ",
        "emoji": "๐ฆ",
        "watching": [
            "ุฃุฑุงูุจ ุงูููุงุฑุงุช ูุญุชููุฉ ูู {count} ุณูู",
            "ุฃุชุชุจุน ูุจูุท ุญุงุฏ ูู {count} ูุฑุตุฉ",
            "ุฃุจุญุซ ุนู ุฐุนุฑ ูู {count} ุณูู"
        ],
        "waiting_reasons": [
            "ุงูุณูู ูุงุฏุฆ ุฌุฏุงู - ูุง ูุจูุท ุญุงุฏ (ุฃูุตุงู -2%)",
            "ุขุฎุฑ ุงูุฎูุงุถ ูุงู ุจุณูุทุงู - ุฃุจุญุซ ุนู -5% ูุฃูุซุฑ",
            "ุงููุณุชุซูุฑูู ูุชูุงุฆููู - ูุง ุฐุนุฑ ุจูุนู",
            "ุงูุฃุฎุจุงุฑ ุฅูุฌุงุจูุฉ - ูุฑุต ุงููุจูุท ููููุฉ",
            "ุงูุชุธุฑ ุญุฏุซ ุณูุจู ุฃู ุชุตุญูุญ ูุจูุฑ"
        ],
        "next_action": [
            "ุฅุฐุง ุงููุงุฑ ุณูู 8% ุณุฃูุชูุต ุงููุฑุตุฉ",
            "ุฃุชุฑูุจ ุฃุฎุจุงุฑ ุงูููุฏุฑุงูู ุบุฏุงู",
            "ุณุฃุฏุฎู ุนูุฏ ุฃูู ุฐุนุฑ ุจูุนู"
        ]
    },
    
    "al_hout": {
        "name": "ุงูุญูุช",
        "emoji": "๐",
        "watching": [
            "ุฃุชุชุจุน ุฃุญุฌุงู ุชุฏุงูู {count} ุณูู",
            "ุฃุฑุงูุจ ุชุญุฑูุงุช ุงููุคุณุณุงุช ูู {count} ูุฑุตุฉ",
            "ุฃุจุญุซ ุนู ุญุฌู ุถุฎู ูู {count} ุณูู"
        ],
        "waiting_reasons": [
            "ุงูุญุฌู ุนุงุฏู (500M) - ุงูุชุธุฑ 1B ูุฃูุซุฑ",
            "ูุง ุญุฑูุงุช ูุคุณุณูุฉ ูุจูุฑุฉ ุญุชู ุงูุขู",
            "ุงูุณูููุฉ ูุชูุณุทุฉ - ูุง ุชุฏููุงุช ุถุฎูุฉ",
            "ุงูุญูุชุงู ูุงุฏุฆุฉ - ูุง ุฅุดุงุฑุงุช ูููุฉ",
            "ุขุฎุฑ ุญุฌู ุถุฎู ูุงู ุงูุฃุณุจูุน ุงููุงุถู"
        ],
        "next_action": [
            "ุนูุฏูุง ูุฏุฎู ุญูุช ูุจูุฑ ุณุฃุชุจุนู ููุฑุงู",
            "ุฃูุชุธุฑ ุญุฌู ูุชุฌุงูุฒ 2B",
            "ุณุฃุฑุงูุจ ููุงูุฉ ุงูุฃุณุจูุน ููุชุญุฑูุงุช"
        ]
    }
}


def get_robot_status(robot_id, stock_count=None):
    """
    Generate a dynamic status message for a robot
    
    Args:
        robot_id: ID of the robot
        stock_count: Number of stocks being watched (optional)
    
    Returns:
        dict with status message components
    """
    if robot_id not in ROBOT_STATUS_MESSAGES:
        return {
            "name": robot_id,
            "emoji": "๐ค",
            "message": "ุฃุฑุงูุจ ุงูุณูู ุจุญุซุงู ุนู ุงููุฑุตุฉ ุงููุซุงููุฉ..."
        }
    
    robot = ROBOT_STATUS_MESSAGES[robot_id]
    count = stock_count or random.randint(15, 35)
    
    # Pick random messages
    watching = random.choice(robot["watching"]).format(count=count)
    reason = random.choice(robot["waiting_reasons"])
    action = random.choice(robot["next_action"])
    
    # Combine into full message
    message = f"{watching}. {reason}. {action}"
    
    return {
        "name": robot["name"],
        "emoji": robot["emoji"],
        "watching": watching,
        "reason": reason,
        "next_action": action,
        "full_message": message,
        "timestamp": datetime.now().isoformat(),
        "last_check": datetime.now().strftime("%H:%M")
    }


def get_all_robots_status():
    """Get status for all robots"""
    statuses = {}
    for robot_id in ROBOT_STATUS_MESSAGES.keys():
        statuses[robot_id] = get_robot_status(robot_id)
    return statuses


# For testing
if __name__ == "__main__":
    print("๐ค Robot Status Messages Test\n")
    
    for robot_id in ROBOT_STATUS_MESSAGES.keys():
        status = get_robot_status(robot_id)
        print(f"{status['emoji']} {status['name']}:")
        print(f"   {status['full_message']}\n")
